---
layout: post
title:  "Raspberry Pi の導入"
categories: RaspberryPi
---
[Raspberry Pi](https://www.raspberrypi.org/products/raspberry-pi-3-model-b/) を買った。

のだが、色々、進んでいない。

何に使う？ Gateway とか radiko の録音サーバ位が現在の目標。
つまり、普通の PC としての用途。

まぁ、のんびりやるとするかな。


* TOC
{:toc}

# これは何？
[Raspberry Pi 3 Model B](https://www.raspberrypi.org/products/raspberry-pi-3-model-b/)
ってやつ。（以下、RPi3 とも書く）

Amazon を見ていたら、ケース付きで出ていた。
今まで手を出していなかった理由の一つに基板なんかがむき出しのままだと
使いにくそうってのがあった。それが解消され、値段もそこそこって事で
ポチってしまった。



# 何に使う？

しばらく前にちょっとしたブームになっていて、いろいろ書籍なども出ていた。
いわゆる「組み込み」用途の例が多数あり、詳しくでている。

或いは、単に安価で小さな PC なので、そう使う事もできる。

まぁ、Windows や MacOS は乗らないけど。



# 基本情報

## 購入前に知っておくと良いこと

とりあえず、どう使うかイメージしてみる手助けに。

### 全般

- 単体で PC として使える。PC 用のモニタ、キーボード、マウスをつないで使える。
- OS はダウンロードしたものを（マイクロ）SD カードに書き込んで使用する。
- OS の起動はマイクロ SD カードを装着して USB から給電することで行う。電源スイッチは無い。
- OS は Linux （の独自カスタマイズ）。
- OS には Window 環境があるので、Windwos などの様にマウスで操作できる。
- 有線の LAN アダプタがある。DHCP でアドレスが取れるとそのまま使える。
- 無線の LAN アダプタがある。アクセスポイントを設定すればすぐに使える。
- 別売りの USB シリアルモジュールをつなぐとモニタ無しで使用できて便利。
- マイクロ SD カードへの書き込みなどに別の環境（デスクトップ PC）があると便利。
- マイクロ SD カードへの書き込みは、Windows なら [Win32 Disk Imager](https://sourceforge.net/projects/win32diskimager/) などのツールで、Linux なら dd
コマンドで実行できる。Linux は Windows 上の仮想環境でも可。

単体で PC として使う為のノート PC 化キットもある。


### 使用形態

簡単な順に挙げると

1. モニタ、他をつないで単体で使う
1. 有線 LAN に（DHCP or 固定） でアドレスを振って TeraTerm 等で接続する
1. 無線 LAN に SSID 等を設定して TeraTerm 等で接続する
1. USB シリアルをつないで、TeraTerm 等で接続する（要、起動パラメータ設定）

となる。試すなら、この順で経験値を稼ぐのが良さそう。


### SD カード

- OS の格納＆ブートにマイクロ SD カードを使う。
- Raspbian の full イメージは 4G 位あるので、カード容量はそれ以上欲しい
- イメージファイルを書き込むとそのイメージファイルの容量しか有効にならないが、残り容量いっぱいにパーティションを拡張するツールがある。[GNU Parted](http://www.gnu.org/software/parted) など
- PC へは USB 接続のカードリーダを使う事が多いと思われる
- PC 接続のカードリーダは マイクロ SD カード専用が小さくて扱いやすい。



## 本体以外に必要なもの

使用形態に応じて。前項を参照

- 給電するための USB ケーブル。RPi3 に接続する口がマイクロ USB であること。
- ブート用のメディアとして、マイクロ SD カード


- 単体で使用するなら、モニタ(HDMI)、マウス、キーボード（USB）
- 有線 LAN を使うなら、ケーブル（と、LAN 環境）


# ブートまでの手順

## ブートイメージの取得

[ダウンロードページ](https://www.raspberrypi.org/downloads/) から
NOOBS か Raspbian のイメージファイルを取得できる。

どちらも full と lite の 2 種類がある。lite の方は Window 環境が無い分、
ダウンロードサイズが小さい。

最初に使うなら、Raspbian の full イメージが良いと思う。


## ブートイメージの書き込み

取得したファイルを展開し、ディスクイメージファイルを取り出す。
取り出したファイルを SD カードに書き込む。


## 起動

最初の最初は、モニタ、キーボードをつないでの起動がおススメ。
起動時のメッセージなども見れるので、ちゃんと起動したことが見て取れる。
正常な起動が確認できたらその後はモニタ無しでも自信を持って作業できる。
逆（最初の起動でモニタ無し）にすると、起動がうまく行ったかすら不明となる。

SD カードを Raspberry Pi に装着し、USB 給電をつなぐ。

起動すると、ログイン画面になる。ユーザ／パスワードは pi/raspberry 。

ログイン後は普通の Linux 環境として使える。

root 権限で何かするときは sudo する。また、この時要求されるパスワードは
自分のもの、つまり "raspberry" である。この辺りは Ubuntu と同じ。

注意。無線 LAN など、外部からのアクセスの可能性があるのなら、
パスワードは変更しておく。（と、ssh でログインしたときに表示される）
或いは別ユーザを作り、pi ユーザは消してしまう。


## アプリケーションの追加とアップデート

Raspbian だと [Debian](http://www.debian.org/) や
[Ubuntu](http://www.ubuntu.com/) と同様に、ネットワーク経由で
アプリケーションの追加やアップデートができる。
セキュリティ関連の更新もあるので、定期的に更新する。

```sh
$ sudo apt-get update
$ sudo apt-get upgrade
```

```sh
$ sudo apt-get install someapp
```

あるいは aptitude コマンドで。この辺は Debian や Ubuntu のマニュアルを
参照のこと。


## カーネル、ファームウェアのアップデート

rpi-update コマンドを使う



## この先へ

Have Fun !

